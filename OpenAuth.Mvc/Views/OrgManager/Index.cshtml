<div class="bjui-pageContent">
    <div class="clearfix">
        <div style="float: left; width: 220px; height: 240px; overflow: auto;" class="table table-bordered">
            <ul id="orgTree" class="ztree"></ul>
        </div>
        <div id="ztree-detail" style="margin-left: 225px; width: auto;">
            <table id="test-datagrid-array" data-width="100%" data-height="100%" class="table table-bordered"></table>
        </div>
    </div>
</div>

<script type="text/javascript">

    function zTreeOnClick(event, treeId, treeNode) {
        alert(treeNode.tId + ", " + treeNode.name);
    };

    $(document).ready(function () {

        var setting = {
            view: {
                selectedMulti: false
            },
            data: {
                simpleData: {
                    enable: true,
                    idKey: "id",
                    pIdKey: "pId",
                    rootPId: "null"
                }
            },
            callback: {
                onClick: zTreeOnClick
            }
        };

        $.getJSON("OrgManager/LoadTree", function (json) {
            var zTreeObj = $.fn.zTree.init($("#orgTree"), setting, json);
        });

        $('#test-datagrid-array').datagrid({
            gridTitle: '机构列表显示',
            showToolbar: true,
            toolbarItem: 'all',
            addLocation: 'first',
            local: 'local',
            dataUrl: 'OrgManager/LoadOrg',
            dataType: 'json',
            columns: [
                {
                    name: 'Type',
                    label: '类型',
                    type: 'select',
                    items: [{ '0': '默认' }],
                    align: 'center',
                    width: 80,
                    render: $.datagrid.renderItem
                },
                {
                    name: 'Name',
                    label: '机构名称',
                    align: 'center',
                    width: 100,
                    rule: 'required'
                },
                {
                    name: 'CreateTime',
                    label: '登记日期',
                    type: 'date',
                    pattern: 'yyyy-MM-dd HH:mm'
                }
            ],
            hiddenFields: ['Id'],
            editUrl: 'ajaxDone1.html',
            delUrl: 'ajaxDone1.html',
            paging: { total: 30, pageSize: 5 },
            showTfoot: true,
            editMode: 'dialog',
            fullGrid: true,
            showLinenumber: true,
            showCheckboxcol: true
        });

    });
    //@@ sourceURL=orgIndex.js
</script>